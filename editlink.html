<!DOCTYPE html>
<html{if="$language !== 'auto'"} lang="{$language}"{/if}>
<head>
  {include="includes"}
</head>
<body>
  {include="page.header"}
  <div id="editlinkform" class="edit-link-container pure-g pure-g-full">
    <div class="pure-u-2-24"></div>
    <form method="post"
          name="linkform"
          action="{$base_path}/admin/shaare"
          class="page-form pure-u-20-24"
    >
      {$asyncLoadClass=$link_is_new && $async_metadata && empty($link.title) ? 'loading-input' : ''}

      <h2 class="window-title">
        {if="!$link_is_new"}{'Edit Shaare'|t}{else}{'New Shaare'|t}{/if}
      </h2>
      {if="isset($link.id)"}
        <input type="hidden" name="lf_id" value="{$link.id}">
      {/if}
      {if="!$link_is_new"}<div class="created-date">{'Created:'|t} {$link.created|format_date}</div>{/if}

      <div class="mark-private">
        <label>
        <input type="checkbox"  name="lf_private" id="lf_private"
        {if="($link_is_new && $default_private_links || $link.private == true)"}
          checked="checked"
        {/if}>
        {'Mark as Private'|t}</label>
      </div>

      <p>
        <label for="lf_url">{'URL'|t}
        <input type="text" name="lf_url" id="lf_url" value="{$link.url}" class="lf_input">
        </label>
      </p>

      <p class="{$asyncLoadClass}">
        <label for="lf_title">{'Title'|t}
        <input type="text" name="lf_title" id="lf_title" value="{$link.title}"
         class="lf_input {if="!$async_metadata"}autofocus{/if}"
        >
        </label>
      </p>

      {if="$formatter==='markdown'"}
        <div class="md_help">
          <a href="http://daringfireball.net/projects/markdown/syntax" title="{'Markdown syntax documentation'|t}">
            {'Markdown syntax'|t}
          </a>
        </div>
      {/if}

      <p class="{if="$retrieve_description"}{$asyncLoadClass}{/if}">
        <label for="lf_description">{'Description'|t}
        <textarea name="lf_description" id="lf_description" class="autofocus">{$link.description}</textarea>
       </label>
      </p>

      <p class="{if="$retrieve_description"}{$asyncLoadClass}{/if}">
        <label for="lf_tags">{'Tags'|t}
        <input type="text" name="lf_tags" id="lf_tags" value="{$link.tags}" class="lf_input autofocus"
          data-list="{loop="$tags"}{$key}, {/loop}" data-multiple data-autofirst autocomplete="off" >
        </label>
      </p>

      <div id="editlink-plugins">
        {loop="$edit_link_plugin"}
          {$value}
        {/loop}
      </div>


      <div class="submit-buttons">
        <input type="submit" name="save_edit" class="" id="button-save-edit"
               value="{if="$link_is_new"}{'Save'|t}{else}{'Apply Changes'|t}{/if}">
        {if="!$link_is_new"}
        <a href="{$base_path}/admin/shaare/delete?id={$link.id}&amp;token={$token}"
           title="" name="delete_link" class="pure-button button-red confirm-delete">
          {'Delete'|t}
        </a>
        {/if}
      </div>

      <input type="hidden" name="token" value="{$token}">
      <input type="hidden" name="source" value="{$source}">
      {if="$http_referer"}
        <input type="hidden" name="returnurl" value="{$http_referer}">
      {/if}
    </form>
  </div>
  {include="page.footer"}
  {if="$link_is_new && $async_metadata"}<script src="{$asset_path}/js/metadata.min.js?v={$version_hash}#"></script>{/if}
</body>
</html>
